## 进程

进程是一种系统运行行动，它是程序的执行实体。

查询进程： ps [pid]

e.g ps aux | grep Chrome

一般情况下，一个程序会启动一个进程，也有特殊情况。比如python调用多进程的包，就可以启动一个父进程和多个子进程。

## 线程

线程是运算调度的最小单元，主要作用就是同事运算多个任务。

可以理解为，线程是将进程切分成了不同的运算段。

怎么切？——这是内核控制的；

切多大？——这是缓存+内核控制的；

等长吗？——不等长。

线程查看：ps -M [pid]

## 协程

协程（Coroutine）是对线程的优化，是轻量级的线程。

之前线程的调度都是由处理器完成的，协程给了用户更大的自由度，是由用户来调度。协程的本质就是用户控制的函数。

协程对线程的优化主要体现在两点：

1. 协程的内存消耗更小；

   一个线程可以包含多个协程，线程大约8MB的内存申请量；协程大约2KB的内存申请量。

2. 上下文切换更快；

   协程少一道手续，线程申请内存，需要走过内核，协程申请内存，不需要走过内核。

## Goroutine

Goroutine是一种协程。它对协程也做了一系列的优化：

1. 去掉了冗余的协程生命周期管理；

   包括协程创建、完成、重用等步骤；

2. 降低额外的延迟和开销；

   由于协程间频繁交互导致的；

3. 降低加锁/解锁的频率；

   将第一部分额外的开销。

## 特点

1. 轻量级，一个占几kb左右（忽略内容占用的内存），比线程小得多；

2. 非抢占式

   线程的调度会有操作系统的干预，而go的协程并不属于os的资源，os是没办法调度的，只有go的编程者自己有能力来处理。如果开发者不处理，就不会干预。

